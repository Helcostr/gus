<!DOCTYPE html>
<html>
  <head>
    <title>GUS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <style>
      body {
        text-align: center
      }

      body form {
        display: none;
      }

      body #results {
        display: none;
      }

      body[data-state=form] form {
        display: inline-block;
        max-width: 750px;
      }

      body[data-state=results] #results {
        display: inline-block;
        max-width: 750px;
      }

      section {
        text-align: left;
        padding: 0.5em;
        border: 2px solid #000;
      }
      .note {
        color: red;
      }
    </style>
  </head>
  <body onload="init()">
    <h1>GUS</h1>
    <form id="searchForm">
      <section>
        <h3>Search Term</h3>
        <input id="searchTerm" placeholder="Search for..."><br>
        <h4>Search in...</h4>
        <label><input type="checkbox" id="searchTitle"> Guild Title</label><br>
        <label><input type="checkbox" id="searchSummary"> Guild Summary</label>
        <p>Guild Description cannot be searched.</p>
        <label><input type="checkbox" id="useSearchTerm"> Don't use a search term</label><br>
        <p class="note">Note: When putting in multiple search terms, adhere to the following rules:<br>If all search terms must be in the guild, use "<i>search term</i> && <i>search term</i>". If either search term can be found in the guild, use "<i>search term</i> || <i>search term</i>"</p>
      </section>
      <section>
        <h3>Language</h3>
        <select id="langSelect">
          <option value="no-lang">Don't filter by Specific Language</option>
          <option value="En">English</option>
          <option value="Fr">French</option>
          <option value="Pt">Portugese</option>
          <option value="Ru">Russian</option>
        </select>
        <label><input type="checkbox"> Must contain my language</label>
        <p>More languages coming...</p>
      </section>
      <section>
        <h3>Category</h3>
        <label>Main category:<br>
          <select id="mainCategory">
            <option value="none">Loading Categories...</option>
          </select><br>
          <select id="subCategory">
            <option value="none">Please pick a Main Category</option>
          </select>
          <br>
          <label><input type="checkbox" id="habiticaOfficial"> Habitica Offical</label>
        </label>
      </section>
      <button onclick="searchGuilds()">Search Guilds</button>
    </form>
    <div id="results">
      <h2>Search Results</h2>
    </div>
    <script>
      var initState = "form";
      var lang = "En";
      var categories = {};
      var guilds = {};
      function setPageState(state) {
        document.getElementsByTagName("BODY")[0].setAttribute("data-state", state);
      }
      function getGuilds(location = "./output/guilds.json") {
        function setGuilds(data) {
          guilds = data;
        }
        $.ajax({
          dataType: "json",
          url: location,
          method: 'get',
          success: function(response) {
            setGuilds(response);
          }
        });
      }
      function getCategories() {
        function setCategories(data) {
          categories = data;
            setMainCategories();
        }
        var location = "./translation/lang" + lang + ".json";
        $.ajax({
          dataType: "json",
          url: location,
          method: 'get',
          success: function(response) {
            setCategories(response.categories);
          }
        });
      }
      function setMainCategories() {
        
      }
      function setSubCategories() {

      }
      function init() {
        getGuilds();
        getCategories();
        setPageState(initState);
      }
    </script>
  </body>
</html>